import{_ as c,M as s,p as a,q as d,Q as e,t as r,N as t,a1 as i}from"./framework-fb92cdbb.js";const n={},p=e("blockquote",null,[e("p",null,"QGIS 是一款开源的 GIS 数据浏览、数据管理的综合平台，该软件支持很多数据源，本文记录使用 QGIS 将ArcGIS Server发布的图层数据导入到 PostGIS 中")],-1),g=e("h2",{id:"qgis-的下载与安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#qgis-的下载与安装","aria-hidden":"true"},"#"),r(" QGIS 的下载与安装")],-1),h={href:"https://docs.qgis.org/3.22/zh-Hans/docs/user_manual/introduction/getting_started.html#installing-qgis",target:"_blank",rel:"noopener noreferrer"},l=i('<h2 id="连接-arcgis-server" tabindex="-1"><a class="header-anchor" href="#连接-arcgis-server" aria-hidden="true">#</a> 连接 ArcGIS Server</h2><p>在 QGIS 左侧的<code>浏览器</code>面板中找到<code>ArcGIS REST 服务器</code>，右击选中<code>新建连接</code>，如下图所示</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-2.png$fix.water" alt="新建ArcGIS REST 服务器"></p><p>输入连接名称后，将 ArcGIS Server 发布的服务地址粘贴到<code>url</code>输入框中(示例：<code>http://192.16.9.110:6080/arcgis/rest/services/</code>)</p><h2 id="导出arcgis-server-发布的图层数据" tabindex="-1"><a class="header-anchor" href="#导出arcgis-server-发布的图层数据" aria-hidden="true">#</a> 导出ArcGIS Server 发布的图层数据</h2><p>连接完成后，在节点下会以目录形式展示图层，双击目标图层可以在主视图中浏览，同时在左侧下方的<code>图层面板</code>中以复选框形式展示历史图层，如下图所示</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-4.png$fix.water" alt="图层展示"></p><h2 id="导出目标图层为-esri-shapefile" tabindex="-1"><a class="header-anchor" href="#导出目标图层为-esri-shapefile" aria-hidden="true">#</a> 导出目标图层为 ESRI Shapefile</h2><p><code>ArcGIS Server</code>发布的图层的原始文件为<code>ESRI Shapefile</code>，因此需要将目标图层导出到本地，在左上浏览器中的图层列表中右击<strong>带点线面icon的图层</strong>，如下图所示</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-5.png" alt="带点线面icon的图层"></p><p>继续选择<code>导出图层 =&gt; 到文件</code>，在弹出的面板中将格式选中为<code>ESRI Shapefile</code>后，填入图中红框中的信息</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-6.png" alt="导出"></p><p>点击<code>OK</code>确认，将文件保存到本地，本地文件是一组 GIS 文件集合，如下图所示</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-7.png" alt="GIS文件"></p><h2 id="连接-posgis-数据库" tabindex="-1"><a class="header-anchor" href="#连接-posgis-数据库" aria-hidden="true">#</a> 连接 PosGIS 数据库</h2><p>与<a href="#%E8%BF%9E%E6%8E%A5-arcgis-server">连接 ArcGIS Server</a> 类似，在QGIS左侧的<code>浏览器</code>面板中找到<code>PostgreSQL 服务器</code>（某些版本是<code>PostGIS 服务器</code>），右击选中<code>新建连接</code>，下图为示例</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-8.png$fix.water" alt="PostgreSQL"></p><h2 id="导入到-postgis-服务器" tabindex="-1"><a class="header-anchor" href="#导入到-postgis-服务器" aria-hidden="true">#</a> 导入到 PostGIS 服务器</h2><p>打开数据库管理器(<code>菜单栏 =&gt; 数据库 =&gt; 数据库管理器</code>)，左侧数据源面板中找到<code>PostGIS</code>后选中刚刚建立的连接，点击面板上方<code>导入图层或文件</code>，在<code>导入矢量图层</code>中填入配置，如下图所示</p><p><img src="https://cdn.porridge.fun/blog/gis/QGIS-9.png$fix.water" alt="导入"></p><div class="custom-container warning"><p class="custom-container-title">注意</p><ul><li>主键字段对应的数据不能有重复值，否则会报错，若id重复则推荐使用<code>OBJECTID</code></li><li>坐标系若不为<code>默认CRS：ESPSG:4326 - WGS 84</code>，则需要配置为图层对应的<code>EPSG</code></li></ul></div><h2 id="验证" tabindex="-1"><a class="header-anchor" href="#验证" aria-hidden="true">#</a> 验证</h2><p>导入成功后，<code>数据库管理器</code>中点击面板上方的刷新按钮，查看数据连接下是否有新增的表，使用其他数据库管理工具也可进行验证 <img src="https://cdn.porridge.fun/blog/gis/QGIS-10.png$fix.water" alt="验证"></p>',23);function S(f,I){const o=s("ExternalLinkIcon");return a(),d("div",null,[p,g,e("p",null,[r("支持 Windows 与 MacOS 操作系统，下载与安装参照"),e("a",h,[r("官网文档"),t(o)])]),l])}const G=c(n,[["render",S],["__file","postgis.html.vue"]]);export{G as default};
